<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>大转盘活动</title>
<link rel="stylesheet" type="text/css" href="css/reset.css"/>
<link rel="stylesheet" type="text/css" href="css/turntable.css"/>
<link rel="stylesheet" type="text/css" href="css/swiper.min.css"/>
<script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
<script src="js/swiper.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="js/awardRotate.js"></script>
<script type="text/javascript">
    function initScale(){
	    var iWidth=document.documentElement.getBoundingClientRect().width;
	    iWidth=iWidth>750?750:iWidth;
	    document.getElementsByTagName("html")[0].style.fontSize=iWidth/3.75+"px";
    }
    window.onresize=function(){
        initScale();
    }
    initScale();
</script>
<script type="text/javascript">
	
var turnplate={
		restaraunts:[],				//大转盘奖品名称
		startAngle:0,				//开始角度
		bRotate:false,				//false:停止;ture:旋转
		imgArr:['images/p3-bg.jpg',
		'images/p3-zhuanbg_03.png',
		'images/p3-jiangpin_03.png',
		'images/t200_03.png',
		'images/tshiwu_03.png',
		'images/tshiwuAir_03.jpg',
		'images/tshiwuK_03.jpg',
		'images/tshiwukanjia_03.jpg',
		'images/tshiwuUpan_03.jpg',
		'images/tshiwuWanou_03.jpg',
		'images/tnone_03.png',
		'images/tnochance_03.png'
		]
};
$(document).ready(function(){
	$(".model-bottomimg").height($("html").height()-$(".model-topimg").height());
	$(".alert-quan").css('background-image','url('+turnplate.imgArr[3]+')');
	$(".alert-shiwu").css('background-image','url('+turnplate.imgArr[4]+')');
	$(".alert-none").css('background-image','url('+turnplate.imgArr[10]+')')
	var e=$("#aq-ma");
	//动态添加大转盘的奖品与奖品区域背景颜色
	turnplate.restaraunts = ["联想k歌宝", "优惠券", "谢谢参与","联想看家宝", "小新玩偶", "小新Air12","小新闪存盘"];
	turnplate.colors = ['#da000d'];
	var rotateTimeOut = function (){
		$('#wheelcanvas').rotate({
			angle:0,
			animateTo:2160,
			duration:5000,
			callback:function (){
				alert('网络超时，请检查您的网络设置！');
			}
		});
	};

	//旋转转盘 item:奖品位置; txt：提示语;
	var rotateFn = function (item, txt){
		var angles = item * (360 / turnplate.restaraunts.length) - (360 / (turnplate.restaraunts.length*2));
		if(angles<270){
			angles = 270 - angles; 
		}else{
			angles = 360 - angles + 270;
		}
		$('#wheelcanvas').stopRotate();
		$('#wheelcanvas').rotate({
			angle:0,
			animateTo:angles+1800,
			duration:5000,
			callback:function (){
				if(item==2){
					$(".model-mask").show();
					$(".alert-quan").show();
					var str='200元优惠码：'+$(".aq-two").val()+'    十元优惠码：'+$(".aq-ten").val();
					e.html(str);
					$(".aq-copy").click(function(){
						var e=document.getElementById('aq-ma');
						e.select();
						tag=document.execCommand("Copy");
						if(tag){  
				          alert('复制内容成功');  
				        }  
					})
					$(".aq-close").click(function(){
						$(".model-mask").hide();
						$(".alert-quan").hide();
					})
				}else if(item==1){
					$(".model-mask").show();
					$(".alert-shiwu").show();
					$(".as-jp").text('联想k歌宝');
					$(".ai-img").attr('src',turnplate.imgArr[6]).css({'width':'0.7rem','height':'1rem'})
				}else if(item==3){          //谢谢参与
					$(".model-mask").show();
					$(".alert-none").show();
					$(".none").click(function(){
						$(".model-mask").hide();
						$(".alert-none").hide();
					})
				}else if(item==4){
					$(".model-mask").show();
					$(".alert-shiwu").show();
					$(".as-jp").text('联想看家宝');
					$(".ai-img").attr('src',turnplate.imgArr[7]).css({'width':'0.73rem','height':'0.9rem'})
				}else if(item==5){
					$(".model-mask").show();
					$(".alert-shiwu").show();
					$(".as-jp").text('小新玩偶');
					$(".ai-img").attr('src',turnplate.imgArr[9]).css({'width':'0.82rem','height':'1.01rem'})
				}else if(item==6){
					$(".model-mask").show();
					$(".alert-shiwu").show();
					$(".as-jp").text('小新Air12');
					$(".ai-img").attr('src',turnplate.imgArr[5]).css({'width':'1.16rem','height':'0.91rem'})
				}else if(item==7){
					$(".model-mask").show();
					$(".alert-shiwu").show();
					$(".as-jp").text('小新闪存盘');
					$(".ai-img").attr('src',turnplate.imgArr[8]).css({'width':'0.7rem','height':'1rem'})
				}
				$(".submit").click(function(){
					if($("input.name").val()==0){
						alert('请填写收货人姓名')
					}else if($("input.tel").val()==0){
						alert('请填写收货人电话')
					}else if($("textarea.adress").val()==0){
						alert('请填写收货人地址')
					}else{
						$(".model-mask").hide(300);
						$(".alert-shiwu").hide(300);
					}
				})
				turnplate.bRotate = !turnplate.bRotate;
			}
		});
	};
	var a=0;
	parent.cjNumber=1;
	$('.pointer').click(function (){
		a++;
		if(turnplate.bRotate)return;
		turnplate.bRotate = !turnplate.bRotate;
		var item = rnd(1,turnplate.restaraunts.length);
		//奖品数量等于10,指针落在对应奖品区域的中心角度[252, 216, 180, 144, 108, 72, 36, 360, 324, 288]
		rotateFn(3, turnplate.restaraunts[3-1]);       //奖品序号及弹出窗口内容
		if(a==parent.cjNumber){
			console.log('抽奖次数用完');
			$(this).unbind('click');
			$(this).on('click',function(){
				$(".model-mask").show();
				$(".alert-none").css('background-image','url('+turnplate.imgArr[11]+')')
				$(".alert-none").show();
				$(".none").click(function(){
					$(".model-mask").hide();
					$(".alert-none").hide();
				})
			})
		}
	});
	
});
function rnd(n, m){
	var random = Math.floor(Math.random()*(m-n+1)+n);
	return random;
	
}
//页面所有元素加载完毕后执行drawRouletteWheel()方法对转盘进行渲染
window.onload=function(){
	drawRouletteWheel();
};

function drawRouletteWheel() {    
  var canvas = document.getElementById("wheelcanvas");    
  if (canvas.getContext) {
	  //根据奖品个数计算圆周角度
	  var ctx = canvas.getContext("2d");
	  var imgBg=document.getElementById('jiangpin');
		  ctx.drawImage(imgBg,6,6); 
  } 
}
</script>

</head>
<body style="position: relative;">
	<div class="model-mask"></div>	
	<div class="alert-quan">
		<input type="text" class="aq-two" readonly style="border: none;" value="1"/>
		<input type="text" class="aq-ten" readonly style="border: none;" value="2"/>
		<textarea style="opacity: 0;position: absolute;z-index: -99;" id="aq-ma"></textarea>
		<div class="aq-close"><img src="images/t200btn_03.png"/></div>
		<div class="aq-copy"><img src="images/t200btn_07.png"/></div>
	</div>
	<div class="alert-shiwu">
		<p class="as-tit">恭喜您获得了<span class="as-jp">联想小新闪存盘</span><br />
		请填写以下信息便于实物奖品发放。
		</p>
		<div class="as-img">
			<img class="ai-img" src="images/tshiwuUpan_03.jpg"/>
			<span>(奖品图片)</span>
		</div>
		<label>姓名:<input type="text" class="name" name="" id="" value="" /></label>	<br />
		<label>手机号:<input type="number" class="tel" name="" id="" value="" /></label>	<br />
		<label>地址:<textarea type="text" class="adress" name="" id="" value=""></textarea></label>	
		<div class="submit"><img src="images/tshiwuBtn_03.png"/></div>
	</div>
	<div class="alert-none">
		<div class="none"><img src="images/t200btn_03.png"/></div>
	</div>
	<div class="model-topimg"></div>
	<div class="model-bottomimg"></div>
	<div class="model-name">
		<span class="mn-tit">中奖名单：</span>
		<div class="mn-list">
			<div class="swiper-container">
				<div class="swiper-wrapper">
					
				</div>
			</div>
		</div>
	</div>
	<img src="images/p3-jiangpin_03.png" id="jiangpin" style="display:none;" />
	<div class="banner">
		<div class="turnplate" style="background-image: url(images/p3-zhuanbg_03.png);background-size:100% 100%;">
			<canvas class="item" id="wheelcanvas" width="422px" height="422px"></canvas>
			<img class="pointer" src="images/p3-chou_03.png" alt=""/>
		</div>
	</div>
	<div class="actRule">
		<h4><img src="images/p3-ruleicon_03.png" alt="" width="14" height="14"/><span>抽奖活动规则</span></h4>
		<p>
			1、【活动时间】10.9-10.29<br />
			<span style="display: inline-block;vertical-align: top;">2、</span><span style="display: inline-block;width: 92%;text-align: justify;">点击立即抽奖即有机会获取各类“小新·基 ”装备；
			      获得实物类奖品需填写收货地址和收货人信息，活动
			      结束后工作人员会统一进行派送；实物奖品每个微信
			      号 仅限领奖一次。
			      优惠券类奖品每个微信号仅限领奖三次，奖品优惠券
			      的使用有效期至2017年11月29日。</span>
		</p>
	</div>
</body>
<script type="text/javascript">
	var arr=["只求一份安定","无可置疑◆","吥↘恠侑嗳↘","丶演绎悲伤","一生承诺","简单灬爱","流年灬未亡","舞动Dē灵魂￠","别在我面前犯贱","__没有背景丶只有背影","乂日光倾城¤","丶猫猫er","雪花ミ飞舞","在哪跌倒こ就在哪躺下","淡抹丶悲伤","メ稀饭你的笑","﹏﹏那年一路向北","纯真ブ已不复存在","∞◆暯小萱◆","や眼角⒈絲淚丶","越疯癫的女人、心越脆弱","开心的笨小孩","虚 张 声 势丶","姬〆小溅","涐们的幸福像流星丶","吾皇万岁_万万岁","倾听冷暖丿","﹡巴黎铁塔","_倾月轩萱_","相见不如怀念〆","沵算what°","放手也是一种罪过‖","有妳很瞞促","早已▲沧海桑田","冷落了♂自己·","帶著面具過日子","體溫 ㎝ ╮","哥，淫领时尚","●芣へ慬っ爱","筱┓熙┓","从未消失的孤独","丶七炫灬","╰つ卸不掉的素装ゝ","你永远都不知道我有多爱你","哼唱 小情歌","淡抹、煙熏妝丶","◆残留德花瓣","代价是折磨╳","焚心劫","◆乱世梦红颜","有你，很幸福","哭花了素颜、","昂贵的、背影","淡淡の、清香","迷路的男人","虚伪了的真心","笑叹★尘世美","ー 半 忧 伤","回忆未来","←极§速","米兰","野兽之美","雁過藍天","泡泡龙","tina","为爱放弃","生命一旅程","杰克","Аη","大朋友","、尓蕞紾貴","丶始终ē∫桓鋈似嗔供d","宝贝雪儿","Jessie","﹎﹎F魚uot;","大棒","灵兰若梦","锦瑟幽心","冰城","文远","阿红","我是傻A","惊鴻【照】影","蛰伏","Davidchan","李丰@法兰柯","MaRTiN","yi笑为红颜、","tomath","天涯","森舟电商肖森舟","搁浅","Honeyヽ","Sorry丶我不是警察","━丅輩孒、洎①起","喂.ωǒ娶妳","dev0","似曾相识","可可妈","こ情ゼ街ツ","′A伱.","星杰(二)","愛heart","拽ご地皇ミ","莲波仙子","bibe","___煙·(菋","小棉","金色","谢震宇","袭夜风","海藻","等lsuo;呢","wei","祐掱丶畫情灬","獨留記憶:","HGC、","车♀神","strom98","lin","平凡","蔡仁傑","中华英雄","小宝贝","纯洁的半烟","∩千里之外し","峰回路转","白帆","唯独钟情于你","褪蘟※茳餬","温柔一脚","要烦","尘梦如烟","金邦内存厂家","︶ㄣ莣孒ㄣ","鱼一直下","summer@","碧荷叶","6月","贱狗","小小","思静","梦朦","英英","冯新","linda","vpn代理","落叶知秋","King.","『我心永恒』","淤淤","无语","Mr丶小华","shiyibin","Liu.J.H","椰风","╰★╮闆塼","随意","今生你做伴","灬一抹丶苍白","﹎℡默默的爱","↘▂_倥絔","余温散尽 ぺ","莫名的青春","今非昔比'","放肆丶小侽人","那伤。眞美","日久见人心","相知相惜","ˉ夨落旳尐孩。","。婞褔ｖīｐ","最迷人的危险","残花为谁悲丶","々爱被冰凝固ゝ","请在乎我１秒","爱你心口难开","怀念·最初","命运不堪浮华","蝶恋花╮","漫长の人生","浮殇年华","、花容月貌","孤单*无名指","执念，爱","Edinburgh° 南空","■　孤独像过不去的桥　≈","拥菢过后、只剰凄凉→＼","别在我面前犯贱","＊巴黎铁塔","念安． я","、あ浅浅の嘚僾","蔚蓝的天空〃没有我的翅膀","在哪跌倒こ就在哪躺下","开心的笨小孩","淡抹丶悲伤","花花世界、总是那么虚伪﹌","余温散尽 ぺ","▼遗忘、那段似水年华","冷落了♂自己·","゛指尖的阳光丶","ok绷遮不住我颓废的伤あ","花开丶若相惜","伱德柔情、是我的痛。","|   赤;焰﹏゛","景忧丶 枫涩帘淞幕雨","◆残留德花瓣","┲﹊怅惘。","纯真ブ已不复存在","╯念1抹浅笑","涐们的幸福像流星丶","迷路的男人","我、就是这样一个人","■□丶一切/都无所谓","♂你那刺眼的温柔","_心、抽搐到严重畸形っ°","∞◆暯小萱◆","淡抹、烟熏妆丶"]
	var l=arr.length,
		arrName=[];
	for(var i=0;i<15;i++){
		var nameIndex=parseInt(Math.random()*l);
		arrName.push(arr[nameIndex]);
	}
	var str='<div class="swiper-slide"><p><span>'+arrName[0]+'</span>/<span>'+arrName[1]+'</span>/<span>'+arrName[2]+'</span></p></div>'+
		'<div class="swiper-slide"><p><span>'+arrName[3]+'</span>/<span>'+arrName[4]+'</span>/<span>'+arrName[5]+'</span></p></div>'+
		'<div class="swiper-slide"><p><span>'+arrName[6]+'</span>/<span>'+arrName[7]+'</span>/<span>'+arrName[8]+'</span></p></div>'+
		'<div class="swiper-slide"><p><span>'+arrName[9]+'</span>/<span>'+arrName[10]+'</span>/<span>'+arrName[11]+'</span></p></div>'+
		'<div class="swiper-slide"><p><span>'+arrName[12]+'</span>/<span>'+arrName[13]+'</span>/<span>'+arrName[14]+'</span></p></div>';
	$(".swiper-wrapper").html(str)
	var tableSwiper = new Swiper('.swiper-container', {
		pagination: '.swiper-pagination',
		direction: 'vertical',
		autoplay : 3000,
		loop:true
	});
	
</script>
</html>













